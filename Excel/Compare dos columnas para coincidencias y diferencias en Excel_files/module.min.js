document.addEventListener("DOMContentLoaded",function(){document.querySelector("body").addEventListener("click",function(t){var e=t.target.parentElement.closest("[data-fd-toolbar-logout-button]");if(t.target.hasAttribute("data-fd-toolbar-logout-button")||null!==e){const o=document.querySelector("[data-fd-toolbar-logout-form]");o.submit()}},!0)}),jQuery(document).ready(function(d){var o,a,n,l={wrapper:"[data-fd-toolbar]",minimumLength:3,opts:{form:"[data-fd-search-toolbar-form]",textfield:"[data-search-input]"},loading:!1,tip:null,category:0,suggest:function(r){if(!l.loading){null!==l.tip&&l.tip.hide();var t=r.length;if(this.minimumLength=document.querySelector(this.wrapper).getAttribute("data-fd-search-suggestion-minimum"),r&&""!=d.trim(r)&&!(t<this.minimumLength)){const e=document.getElementById("fd").offsetWidth;t=tippy(document.querySelectorAll(l.opts.textfield),{content:t=>t.nextElementSibling.innerHTML,onShow(o){if(d(o.popper).css("width",e),!l.loading){l.loading=!0;var a=o.reference.getAttribute("data-fd-component"),n=[];let t=document.querySelectorAll("[data-fd-filtertypes]:checked");var i=document.querySelector(l.wrapper).getAttribute("data-fd-search-suggestion");t.forEach(t=>{n.push(t.value)});let e={type:"POST",url:window.tb.ajaxUrl,data:{method:"search",component:a,category_id:l.category,filtertypes:n,showSuggest:i}};i=o.reference.getAttribute("name");e.data[i]=r,e.data[window.tb.token]=1,d.ajax(e).done(function(t){!1===t.success&&(t=d("[data-fd-toolbar]").data("fd-error"));const e=d(o.popper).find("[data-fd-dropdown-body]");e.html(t);t=e.find("[data-search-suggestion]");0<t.length&&t.on("click",function(){var t=d(this).data("search-suggestion-value");d(l.opts.textfield).val(t),d(l.opts.form).submit(),l.tip.hide()})}).always(function(){l.loading=!1})}},placement:"bottom",maxWidth:e,role:"fd-dropdown",allowHTML:!0,theme:"fd-light",trigger:"manual",arrow:!1,interactive:!0,appendTo:document.body});l.tip=t[0],l.tip.show()}}},filter:function(t){event.preventDefault(),event.stopPropagation();let e="select"==t.getAttribute("data-fd-filter"),o=document.querySelectorAll("[data-fd-filtertypes]");o.forEach(t=>{t.checked=e})}};let t=document.querySelector(l.opts.textfield);null!==t&&t.addEventListener("keyup",(o=function(t){27!==t.which&&l.suggest(this.value)},a=350,n=0,function(){var t=this,e=arguments;clearTimeout(n),n=setTimeout(function(){o.apply(t,e)},a||0)})),window.tb.dialog=jQuery.extend(fd.dialog,{appearance:window.tb.appearance,theme:window.tb.theme,mobile:window.tb.mobile,ios:window.tb.ios}),document.querySelector("body").addEventListener("click",function(o){var t=o.target.parentElement.closest("[data-fd-toolbar-search-toggle]");if(o.target.hasAttribute("data-fd-toolbar-search-toggle")||null!==t){let t=o.target.getAttribute("data-fd-component"),e=o.target.getAttribute("data-fd-moduleId");if(null===t&&(t=o.target.parentElement.getAttribute("data-fd-component"),e=o.target.parentElement.getAttribute("data-fd-moduleId")),o.target.parentElement.closest("[data-fd-toolbar]").getAttribute("data-fd-responsive"))return void tb.dialog({content:d.ajax({type:"POST",url:window.tb.ajaxUrl,data:{method:"dialog",component:t,moduleId:e}})});const a=o.target.parentElement.closest("[data-fd-toolbar-wrapper]");a.classList.toggle("fd-toolbar--search-on")}else{t=o.target.parentElement.closest("[data-fd-search-filter-item]");if(o.target.hasAttribute("data-fd-search-filter-item")||null!==t){let t=o.target.getAttribute("data-fd-search-filter-value"),e=o.target.getAttribute("data-fd-search-filter-id");null===t&&(t=o.target.parentElement.getAttribute("data-fd-search-filter-value"),e=o.target.parentElement.getAttribute("data-fd-search-filter-id")),document.querySelector("[data-fd-search-filter]").innerHTML=t,l.category=e,document.querySelector("[data-fd-search-category-id]").value=e,document.querySelector(l.opts.textfield).focus()}o.target.hasAttribute("data-fd-filter")&&l.filter(o.target)}},!0)}),jQuery(document).ready(function(l){FD.require().script("vendor/tippy","vendor/perfectscrollbar","vendor/popper","shared").done(function(){!function(){let e=!1,o=!1,a=!1;const n=(t,e)=>{t.update(),e.scrollTop=0};window.tb.dropdown=function(t){return tippy(document.querySelectorAll(t),{content:t=>t.nextElementSibling.innerHTML,onShow(e){const o=e.reference.getAttribute("data-fd-dropdown-content");if(null!==o&&""!==o&&!0!==e.state.fetching&&!1!==e.state.canFetch){l(e.reference).parent().addClass("is-active"),e.state.fetching=!0,e.state.canFetch=!1;var a=o.split("/"),n=a[0],i=a[1],r=e.reference.getAttribute("data-module-id"),d=e.reference.getAttribute("data-module-currentview"),a=e.reference.getAttribute("data-fd-component");let t={type:"POST",url:window.tb.ajaxUrl,data:{method:n}};null!=i&&(t.data.type=i),null!=r&&(t.data.moduleId=r),null!=d&&(t.data.view=d),null!=a&&(t.data.component=a),t.data[window.tb.token]=1,l.ajax(t).done(function(t){!1===t.success&&(t=l("[data-fd-toolbar]").data("fd-error")),l(e.popper).find("[data-fd-dropdown-body]").html(t)}).always(function(){e.state.fetching=!1})}},onHidden(t){t.state.canFetch=!0;var e=l(t.reference).siblings().find("[data-fd-dropdown-body]").html();l(t.popper).find("[data-fd-dropdown-body]").html(e),l(t.reference).parent().removeClass("is-active")},onMount:t=>{t.popperInstance.setOptions({placement:t.reference.getAttribute("data-fd-dropdown-placement")}),o=t.popper.querySelector("[data-fd-toolbar-dropdown-menus]"),e=e||new PerfectScrollbar(o,{suppressScrollX:!0}),a||(l(document).on("click","[data-fd-toolbar-dropdown-item]",function(){t.hide()}),a=!0)},popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["top","bottom","bottom-start","bottom-end","top-start","top-end"]}}]},maxWidth:"none",role:"fd-dropdown",allowHTML:!0,theme:"fd-light",trigger:"click",arrow:!1,interactive:!0,appendTo:document.body,zIndex:2147483647})},window.tb.dropdown('[data-fd-dropdown="toolbar"]');const i={hide:"hidden",submenu:"has-submenu",next:function(t){t.closest("li").siblings().addClass(this.hide),t.siblings("a").addBack().addClass(this.hide),t.siblings("ul").removeClass(this.hide),t.closest("ul").addClass(this.submenu),n(e,o)},prev:function(t){container=t.closest("ul"),container.addClass(this.hide),container.removeClass(this.submenu),container.siblings("a").removeClass(this.hide),parent=container.closest("li"),parent.siblings().removeClass(this.hide),parent.closest("ul").removeClass(this.hide),parent.closest("ul").removeClass(this.submenu),n(e,o)},resetDropdown:function(t){t.removeClass(this.hide),t.find("a").removeClass(this.hide),t.find("ul").addClass(this.hide),t.find("ul").removeClass(this.submenu)}};l("body").on("click.toolbar.toggle.dropdown","[data-fd-dropdown]",function(t){t.preventDefault(),t.stopPropagation(),l(this)!==t.target&&i.resetDropdown(l("[data-fd-filter-menu-item]"))}),l("body").on("click.toolbar.toggle.next","[data-fd-menu-nav]",function(t){t.preventDefault(),t.stopPropagation(),i.next(l(this))}),l("body").on("click.toolbar.toggle.prev","[data-fd-menu-nav-back]",function(t){t.preventDefault(),t.stopPropagation(),i.prev(l(this))})}(),window.tb.dropdownSearch=function(t){return tippy(document.querySelectorAll(t),{content:t=>t.nextElementSibling.innerHTML,onMount:t=>{t.popperInstance.setOptions({placement:t.reference.getAttribute("data-fd-dropdown-placement")})},onShow:t=>{let e=t.popper.querySelectorAll("[data-fd-filtertypes]");e.forEach(t=>{t.addEventListener("change",function(){!0===this.checked?document.getElementById(this.id).checked=!0:document.getElementById(this.id).checked=!1})})},popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["top","bottom","bottom-start","bottom-end","top-start","top-end"]}}]},maxWidth:"none",role:"fd-dropdown",allowHTML:!0,theme:"fd-light",trigger:"click",arrow:!1,interactive:!0,appendTo:document.querySelector("[data-fd-search-toolbar-form]"),zIndex:2147483647})},window.tb.dropdownSearch('[data-fd-search-dropdown="toolbar"]'),function(){const t=document.querySelector("[data-fd-tooltip-wrapper]");tippy(document.querySelectorAll('[data-fd-tooltip="toolbar"]'),{content:()=>t.innerHTML,popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["top","bottom","bottom-start","bottom-end","top-start","top-end"]}}]},onMount(t){t.popperInstance.setOptions({placement:t.reference.getAttribute("data-fd-tooltip-placement")});var e=t.reference.getAttribute("data-fd-tooltip-title");t.popper.querySelector("[data-fd-tooltip-message]").innerHTML=e},maxWidth:"none",role:"fd-tooltip",allowHTML:!0,theme:"fd-dark",arrow:tippy.roundArrow,interactive:!0,appendTo:document.body,touch:!1})}()})}),jQuery(document).ready(function(e){var o={popup:{width:500,height:520},openDialog:function(t){var e=this.popup.width,o=this.popup.height,a=t.data("url"),n=screen.width/2-e/2,i=screen.height/2-o/2;t.data("popup")?window.open(a,"","scrollbars=no,resizable=no,width="+e+",height="+o+",left="+n+",top="+i):window.location=a}};e("body").on("click.toolbar.social.sso","[data-fd-oauth-login-button]",function(t){t.preventDefault(),t.stopPropagation(),o.openDialog(e(this))})}),jQuery(document).ready(function(a){FD.require().script("vendor/mmenu").done(function(){var t,e,o=a("#fd-canvas");0<o.length&&(t=o.data("placeholder"),e=o.data("no-result"),o=o.data("title"),new Mmenu("#fd-canvas",{extensions:["pagedim-black","theme-dark","fullscreen","popup"],searchfield:{panel:!0,placeholder:t,noResults:e},navbars:[{position:"top",content:["searchfield","close"]}],navbar:{title:o}}))})}),jQuery(document).ready(function($){var Notification={wrapper:"[data-fd-toolbar]",dropdown:{wrapper:"[data-fd-dropdown-wrapper]",empty:"[data-fd-empty]",item:"[data-fd-notification-items]",status:"[data-fd-friend-request-status]"},elements:{conversation:'[data-fd-dropdown][data-fd-dropdown-content="action/conversations"]',system:'[data-fd-dropdown][data-fd-dropdown-content="action/notifications"]',friend:'[data-fd-dropdown][data-fd-dropdown-content="action/friends"]'},ajaxUrl:window.tb.ajaxUrl,token:window.tb.token,ajaxPollingUrl:null,interval:null,state:null,init:function(){var t=$(this.wrapper).data("fd-polling-url");if(""===t||void 0===t)throw"Something went awry while fetching the toolbar polling url. Please contact our support team for more information.";this.ajaxPollingUrl=atob(t),this.interval=$(this.wrapper).data("fd-polling-interval"),this.state=setTimeout(this.polling(),this.getInterval())},load:function(){if(0===window.tb.userId)return!1;var o=!1;return $.each(this.elements,function(t,e){if(0<$(e).length)return o=!0}),o},getToken:function(){return this.token},stop:function(){clearTimeout(this.state)},getInterval:function(){return 1e3*this.interval},polling:function(){this.stop(),setTimeout(function(){let options={type:"POST",url:Notification.ajaxPollingUrl,data:{userId:window.tb.userId}};options.data[Notification.getToken()]=1,$.ajax(options).done(function(result){$.each(result,function(key,data){var elem=$(eval("Notification.elements."+key));0<data.total?elem.addClass("has-new"):elem.removeClass("has-new")}),Notification.polling()})},this.getInterval())},readAll:function(t){let e={type:"POST",url:Notification.ajaxUrl,data:{method:"setAllRead",type:"notifications"}};e.data[this.getToken()]=1,$.ajax(e).done(function(){t.parents(Notification.dropdown.wrapper).find(Notification.dropdown.empty).addClass("block"),t.parents(Notification.dropdown.wrapper).find(Notification.dropdown.item).remove(),$(Notification.elements.system).removeClass("has-new")})},friendRequest:function(e){var t=e.data("action");let o=e.closest("[data-item]");var a=o.data("id");let n={type:"POST",url:Notification.ajaxUrl,data:{method:"friendRequest",action:t,id:a}};n.data[this.getToken()]=1,$.ajax(n).done(function(t){e.parent().find(Notification.dropdown.status).html(t.message).removeClass("t-hidden"),e.siblings("a").addBack().remove()})}};Notification.load()&&(Notification.init(),$("body").on("click.toolbar.notification.readall","[data-fd-notifications-read-all]",function(t){t.preventDefault(),t.stopPropagation(),Notification.readAll($(this))}),$("body").on("click.toolbar.friend.request.action","[data-fd-friend-request]",function(t){t.preventDefault(),t.stopPropagation(),Notification.friendRequest($(this))}))});